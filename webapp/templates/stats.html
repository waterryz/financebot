<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</title>
    <link rel="stylesheet" href="/static/style.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        function toggleSidebar() {
            document.getElementById("sidebar").classList.toggle("open");
        }
    </script>
</head>
<div class="top-profile">
    <div class="profile-icon" onclick="toggleProfileMenu()">üë§</div>

    <div class="profile-menu" id="profileMenu">
        <a href="/profile?token={{ token }}">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a>
        <a href="/settings?token={{ token }}">‚öô –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
        <a href="/login">üö™ –í—ã–π—Ç–∏</a>
    </div>
</div>

<script>
function toggleProfileMenu() {
    document.getElementById("profileMenu").classList.toggle("open");
}
</script>

<body>

<!-- SIDE BAR -->
<div class="sidebar" id="sidebar">
    <div class="sidebar-tab" onclick="toggleSidebar()">‚ò∞</div>

    <div class="sidebar-content">
        <a href="/home?token={{ token }}">üè† –ì–ª–∞–≤–Ω–∞—è</a>
        <a href="/add_expense?token={{ token }}">‚ûñ –†–∞—Å—Ö–æ–¥</a>
        <a href="/add_income?token={{ token }}">‚ûï –î–æ—Ö–æ–¥</a>
        <a href="/history?token={{ token }}">üìú –ò—Å—Ç–æ—Ä–∏—è</a>
        <a href="/goals?token={{ token }}">üéØ –¶–µ–ª–∏</a>

        <a href="/wishlist?token={{ token }}">üïí –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏</a>
        <a href="/stats?token={{ token }}">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>

    </div>
</div>

<div class="page-wrapper">

    <div class="stats-container">

        <h1 class="stats-title">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>

        <div class="stats-block">
            <p class="inc-title">–î–æ—Ö–æ–¥—ã:</p>
            <p class="inc-value">{{ income }} ‚Ç∏</p>

            <p class="exp-title">–†–∞—Å—Ö–æ–¥—ã:</p>
            <p class="exp-value">{{ expense }} ‚Ç∏</p>
        </div>

        <!-- –î–∏–∞–≥—Ä–∞–º–º–∞ -->
        <div class="chart-wrapper">
            <canvas id="chart"></canvas>
        </div>


    </div>

</div>

<script>
const ctx = document.getElementById('chart').getContext('2d');

new Chart(ctx, {
    type: 'pie',
    data: {
        labels: {{ labels | tojson }},
        datasets: [{
            data: {{ values | tojson }},
            backgroundColor: [
                '#ff6b6b',
                '#4dabf7',
                '#ffd43b',
                '#69db7c',
                '#845ef7',
                '#ffa94d',
                '#40c057'
            ]
        }]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false
    }
});
</script>

</body>
</html>
